# 대기열 시스템

### 참고

-  https://d2.naver.com/helloworld/6480558



### 클라이언트가 대기 정보를 얻어오는 방식
- 전제사항은 대기 팝업이 있고, 팝업에는 대기 정보가 나옴. 즉, 주기적으로 정보를 가져와야한다는 것

- Polling 은 주기적으로 대기정보를 얻어올려고 하면 부하가 많이 감

- 클라이언트 <-> 웹소켓 서버 <-> 대기열 서버
	- 대기열 서버에서 대기 정보를 웹소켓 서버에 전달하고, 웹소켓 서버는 필요한 클라이언트에게만 대기 정보를 전달
	- 클라이언트가 매번 대기열서버에 요청을 하면 부하가 많이 가기 때문에 위 구조가 나온거 같음
	
	


### 대기표 관리 방식
- 대기표 정보를 아무 서버나 저장
- 정렬은 하지 않는다 -> 정렬하면 데이터가 늘어날수록 부하가 늘어남
- 분산 캐시에 대기표 순번을 넣어놔서 대기 진입이 가능한지만 체크




### 대기열 서버 확장 방법
- 대기열 서버가 늘어나거나 줄어들 수 있음 -> 그에 따라 작업할당에 어려움이 있음
- 대기열 서버가 일정한 주기마다 대기열 처리에 지원한 서버가 해당 대기열 처리를 수행하도록 설계
	- Queue 랑 비슷한데. 대신 서버가 먼저 지원하면 해당 데이터를 먼저 처리 