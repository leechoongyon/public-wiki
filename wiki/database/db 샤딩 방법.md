# db 샤딩 공부한 것 정리



### 참고

- https://www.youtube.com/watch?v=zSHp5ZsCZQo



### 공부한 내용 정리

- 결제 쪽 도메인
- 데이터가 많아지며, 하나의 DB 로 처리하는 것이 힘든 상황 -> 샤딩 고려
- youtube 내용에서는 PK 를 샤딩키로 사용하기로 했고, PK 는 Auto increment 로 생성되고 있음
- 즉, 데이터를 생성한 후, 조회해서 어떤 샤딩키로 생성됐는지 체크하는 필요
- 샤딩키를 생성할 때, 앞에 몇자리는 규칙이 있음. 환경, 테이블, 샤딩 넘버 등
- 이런 규칙들을 보고 맵핑 테이블인지 어플리케이션에 처리했던지 맵핑을 해서 요청이 들어오면 routing 진행
- 샤딩 테이블을 묶는건 무슨 오픈소스를 써서 묶었으며, 덜 중요한 Admin 에서 사용. 실제 메인 트랜잭션에서는 사용 X



### 궁금했던 내용

- 각 샤딩 백업들을 어떻게 처리하는지 궁금했는데 해당 부분은 나오지 않았음.
- 또한, 중간에 동적으로 샤딩을 바꾸는 부분이 있었는데 그렇게 되면 나중에 다시 원상복구 했을 때, 맵핑을 어떻게 하는지도 궁금
